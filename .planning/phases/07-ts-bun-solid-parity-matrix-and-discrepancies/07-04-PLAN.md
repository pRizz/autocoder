---
phase: 07-ts-bun-solid-parity-matrix-and-discrepancies
plan: 04
type: execute
wave: 3
depends_on: ["07-01", "07-02", "07-03"]
files_modified:
  - .planning/specs/parity/PARITY-RISK-REGISTER.md
  - .planning/specs/parity/PARITY-ACCEPTANCE-CHECKS.md
  - .planning/specs/parity/TS-BUN-SOLID-PARITY-MATRIX.md
  - .planning/specs/parity/INTENDED-VS-OBSERVED-DISCREPANCY-LEDGER.md
  - .planning/specs/INDEX.md
autonomous: true
requirements: ["MIGR-01", "MIGR-02", "MIGR-03", "MIGR-04", "MIGR-05"]
user_setup: []
must_haves:
  truths:
    - "Migration risks and mitigations are attached to mapped units or parity clusters with explicit severity and control strategy."
    - "Phase 7 parity corpus is acceptance-gated and published as canonical prerequisite input for Phase 8 reconstruction planning."
  artifacts:
    - ".planning/specs/parity/PARITY-RISK-REGISTER.md"
    - ".planning/specs/parity/PARITY-ACCEPTANCE-CHECKS.md"
    - ".planning/specs/INDEX.md"
  key_links:
    - "PARITY-RISK-REGISTER.md and PARITY-ACCEPTANCE-CHECKS.md link risk/discrepancy controls back to TS-BUN-SOLID-PARITY-MATRIX.md and INTENDED-VS-OBSERVED-DISCREPANCY-LEDGER.md."
---

<objective>
Close parity planning with risk, acceptance, and corpus handoff wiring.

Purpose: Satisfy MIGR-05 and complete Phase 7 objective closure for downstream reconstruction planning.
Output: Risk register, parity acceptance checks, and index prerequisite updates.
</objective>

<execution_context>
@/Users/peterryszkiewicz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/peterryszkiewicz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/specs/INDEX.md
@.planning/specs/parity/TS-BUN-SOLID-PARITY-MATRIX.md
@.planning/specs/parity/TS-BUN-SOLID-IMPLEMENTATION-NOTES.md
@.planning/specs/parity/INTENDED-VS-OBSERVED-DISCREPANCY-LEDGER.md
@.planning/specs/surfaces/SURFACE-ACCEPTANCE-CHECKS.md
@.planning/specs/surfaces/SURFACE-TRACEABILITY.md
@.planning/phases/07-ts-bun-solid-parity-matrix-and-discrepancies/07-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Publish parity risk register</name>
  <files>.planning/specs/parity/PARITY-RISK-REGISTER.md</files>
  <action>Create risk register with exactly `12` risk units (`R01`..`R12`) covering runtime migration, process lifecycle parity, security policy equivalence, UI framework migration, test migration, and operations/CI transitions. Include columns for risk ID, impacted clusters/ART spans, severity, likelihood, mitigation strategy, and verification signal.</action>
  <verify>test -f .planning/specs/parity/PARITY-RISK-REGISTER.md && test "$(rg -n '^\| R[0-9]{2} \|' .planning/specs/parity/PARITY-RISK-REGISTER.md | wc -l | tr -d ' ')" = "12"</verify>
  <done>Risk register exists with deterministic 12-unit risk inventory and mitigation controls.</done>
</task>

<task type="auto">
  <name>Task 2: Link risk and discrepancy annotations into parity artifacts</name>
  <files>.planning/specs/parity/TS-BUN-SOLID-PARITY-MATRIX.md, .planning/specs/parity/INTENDED-VS-OBSERVED-DISCREPANCY-LEDGER.md</files>
  <action>Update parity matrix and discrepancy ledger with explicit risk linkage fields (`R##`) so mapped units/discrepancies are connected to mitigation controls. Ensure linkage is deterministic and queryable by regex.</action>
  <verify>rg -n "R0[1-9]|R1[0-2]|risk" .planning/specs/parity/TS-BUN-SOLID-PARITY-MATRIX.md .planning/specs/parity/INTENDED-VS-OBSERVED-DISCREPANCY-LEDGER.md</verify>
  <done>Parity matrix and discrepancy ledger include explicit risk linkage coverage.</done>
</task>

<task type="auto">
  <name>Task 3: Publish parity acceptance checks for MIGR-01..MIGR-05</name>
  <files>.planning/specs/parity/PARITY-ACCEPTANCE-CHECKS.md</files>
  <action>Create requirement-linked acceptance matrix for `MIGR-01`..`MIGR-05` with objective pass/fail checks covering `237/237` parity mapping, TS/Bun/Solid direction coverage, discrepancy coverage (`16/16`), and risk linkage coverage (`12/12`).</action>
  <verify>rg -n "MIGR-01|MIGR-02|MIGR-03|MIGR-04|MIGR-05|237/237|16/16|12/12|pass/fail" .planning/specs/parity/PARITY-ACCEPTANCE-CHECKS.md</verify>
  <done>Parity acceptance checks are explicit and executable for all Phase 7 requirements.</done>
</task>

<task type="auto">
  <name>Task 4: Publish Phase 7 corpus links and Phase 8 prerequisites</name>
  <files>.planning/specs/INDEX.md</files>
  <action>Update `INDEX.md` with a `Parity and Migration Corpus` section linking all Phase 7 artifacts and add explicit Phase 8 prerequisite notes that consume the parity matrix, implementation notes, discrepancy ledger, risk register, and parity acceptance checks.</action>
  <verify>rg -n "Parity and Migration Corpus|TS-BUN-SOLID-PARITY-MATRIX|TS-BUN-SOLID-IMPLEMENTATION-NOTES|INTENDED-VS-OBSERVED-DISCREPANCY-LEDGER|PARITY-RISK-REGISTER|PARITY-ACCEPTANCE-CHECKS|Phase 8|required prerequisites" .planning/specs/INDEX.md</verify>
  <done>Index exposes complete Phase 7 corpus and Phase 8 prerequisite wiring.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] test -f .planning/specs/parity/PARITY-RISK-REGISTER.md
- [ ] test -f .planning/specs/parity/PARITY-ACCEPTANCE-CHECKS.md
- [ ] test "$(rg -n '^\| R[0-9]{2} \|' .planning/specs/parity/PARITY-RISK-REGISTER.md | wc -l | tr -d ' ')" = "12"
- [ ] rg -n "MIGR-01|MIGR-02|MIGR-03|MIGR-04|MIGR-05|237/237|16/16|12/12" .planning/specs/parity/PARITY-ACCEPTANCE-CHECKS.md
- [ ] rg -n "Phase 8|required prerequisites|Parity and Migration Corpus" .planning/specs/INDEX.md
- [ ] git diff --name-only | rg -v '^\.planning/' returns no output
</verification>

<success_criteria>

- All tasks completed
- Risk and mitigation controls are linked to mapped units/discrepancies
- Requirement-linked parity gates exist for MIGR-01..MIGR-05
- Index publishes Phase 7 corpus as canonical Phase 8 prerequisite input
- No source implementation files modified

</success_criteria>

<output>
After completion, create `.planning/phases/07-ts-bun-solid-parity-matrix-and-discrepancies/07-04-SUMMARY.md`
</output>
