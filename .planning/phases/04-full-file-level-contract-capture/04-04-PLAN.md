---
phase: 04-full-file-level-contract-capture
plan: 04
type: execute
wave: 3
depends_on: ["04-02", "04-03"]
files_modified:
  - .planning/specs/contracts/FILE-CONTRACT-COVERAGE.md
  - .planning/specs/contracts/FILE-CONTRACT-QUALITY-AUDIT.md
  - .planning/specs/INDEX.md
autonomous: true
requirements: ["FILE-03", "FILE-04", "FILE-05"]
user_setup: []
must_haves:
  truths:
    - "Full file contract corpus proves canonical inventory ID coverage with zero missing and zero duplicate mappings."
    - "Quality audit confirms every contract contains required sections including error/edge behavior and acceptance checks."
    - "Phase 4 handoff artifacts are linked from index as required prerequisites for Phase 5 surface-contract work."
  artifacts:
    - ".planning/specs/contracts/FILE-CONTRACT-COVERAGE.md"
    - ".planning/specs/contracts/FILE-CONTRACT-QUALITY-AUDIT.md"
    - ".planning/specs/INDEX.md"
  key_links:
    - "FILE-CONTRACT-COVERAGE.md references backend/frontend/non-TS matrices as canonical lane evidence."
---

<objective>
Run full-corpus completeness and quality audit for all Phase 4 file contracts.

Purpose: Prove FILE-03/FILE-04/FILE-05 phase outcomes with deterministic, reusable evidence.
Output: Global coverage report, quality audit report, and index handoff linkage.
</objective>

<execution_context>
@/Users/peterryszkiewicz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/peterryszkiewicz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/specs/INVENTORY.md
@.planning/specs/FILE-SPEC-SCHEMA.md
@.planning/specs/FILE-SPEC-AUTHORING.md
@.planning/specs/contracts/BACKEND-RUNTIME-MATRIX.md
@.planning/specs/contracts/FRONTEND-UI-MATRIX.md
@.planning/specs/contracts/NON-TS-MATRIX.md
@.planning/specs/INDEX.md
@.planning/phases/04-full-file-level-contract-capture/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Produce global file-contract coverage ledger</name>
  <files>.planning/specs/contracts/FILE-CONTRACT-COVERAGE.md</files>
  <action>Create `FILE-CONTRACT-COVERAGE.md` reconciling canonical inventory IDs against all lane matrices/contracts. Include totals, category coverage, `missing_ids`, `duplicate_ids`, and explicit pass/fail verdict. Canonical baseline target: 237/237 IDs covered.</action>
  <verify>rg -n "canonical_inventory_total|covered_ids|missing_ids|duplicate_ids|Status" .planning/specs/contracts/FILE-CONTRACT-COVERAGE.md && rg -n "237/237|missing_ids: 0|duplicate_ids: 0|Status: passed" .planning/specs/contracts/FILE-CONTRACT-COVERAGE.md</verify>
  <done>Coverage ledger proves complete and unique contract mapping for canonical inventory IDs.</done>
</task>

<task type="auto">
  <name>Task 2: Produce full contract quality audit report</name>
  <files>.planning/specs/contracts/FILE-CONTRACT-QUALITY-AUDIT.md</files>
  <action>Create `FILE-CONTRACT-QUALITY-AUDIT.md` with deterministic checks for required schema sections, dependency references, and acceptance-check presence across all contract files. Report pass/fail counts, defect list (if any), and final decision.</action>
  <verify>rg -n "Required Section Checks|Error and Edge Behavior|Acceptance Checks|Pass/Fail|Defects|Decision" .planning/specs/contracts/FILE-CONTRACT-QUALITY-AUDIT.md && rg -n "Status: passed|defects: 0" .planning/specs/contracts/FILE-CONTRACT-QUALITY-AUDIT.md</verify>
  <done>Quality audit report establishes objective quality-bar compliance across the full contract corpus.</done>
</task>

<task type="auto">
  <name>Task 3: Publish Phase 4 completion handoff links</name>
  <files>.planning/specs/INDEX.md</files>
  <action>Update `INDEX.md` with a Full File Contract Corpus section linking lane matrices/directories plus coverage and quality audit reports; mark these as required Phase 5 prerequisites.</action>
  <verify>rg -n "Full File Contract Corpus|FILE-CONTRACT-COVERAGE|FILE-CONTRACT-QUALITY-AUDIT|required prerequisites|Phase 5" .planning/specs/INDEX.md</verify>
  <done>Index exposes complete contract corpus and audit evidence as canonical handoff inputs.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] test -f .planning/specs/contracts/FILE-CONTRACT-COVERAGE.md
- [ ] test -f .planning/specs/contracts/FILE-CONTRACT-QUALITY-AUDIT.md
- [ ] rg -n "237/237|missing_ids: 0|duplicate_ids: 0|Status: passed" .planning/specs/contracts/FILE-CONTRACT-COVERAGE.md
- [ ] rg -n "Status: passed|defects: 0" .planning/specs/contracts/FILE-CONTRACT-QUALITY-AUDIT.md
- [ ] rg -n "Full File Contract Corpus" .planning/specs/INDEX.md
- [ ] git diff --name-only | rg -v '^\.planning/' returns no output
</verification>

<success_criteria>

- All tasks completed
- Global coverage ledger proves full canonical inventory coverage with no missing/duplicate IDs
- Quality audit confirms schema-complete contracts including acceptance checks
- No source implementation files modified

</success_criteria>

<output>
After completion, create `.planning/phases/04-full-file-level-contract-capture/04-04-SUMMARY.md`
</output>
