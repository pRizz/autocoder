---
phase: 06-surface-contracts-data-process-security
plan: 04
type: execute
wave: 2
depends_on: ["06-01", "06-02", "06-03"]
files_modified:
  - .planning/specs/surfaces/SURFACE-CROSS-CONTRACT-CONSISTENCY.md
  - .planning/specs/surfaces/SURFACE-TRACEABILITY.md
  - .planning/specs/surfaces/SURFACE-ACCEPTANCE-CHECKS.md
  - .planning/specs/INDEX.md
autonomous: true
requirements: ["SURF-03", "SURF-04", "SURF-05"]
user_setup: []
must_haves:
  truths:
    - "Data/process/security contracts are consistently linked to existing API/WebSocket and file-contract artifacts with no coverage gaps."
    - "Requirement-linked acceptance checks for SURF-03/04/05 are explicit, objective, and enforceable."
  artifacts:
    - ".planning/specs/surfaces/SURFACE-CROSS-CONTRACT-CONSISTENCY.md"
    - ".planning/specs/surfaces/SURFACE-TRACEABILITY.md"
    - ".planning/specs/surfaces/SURFACE-ACCEPTANCE-CHECKS.md"
    - ".planning/specs/INDEX.md"
  key_links:
    - "SURFACE-CROSS-CONTRACT-CONSISTENCY.md links Phase 6 lane artifacts to Phase 5 surface contracts and Phase 4 file contracts (`ART-####`)."
---

<objective>
Run cross-contract consistency closure for data/process/security surface corpus.

Purpose: Complete Phase 6 by proving data/process/security contracts are coherent with prior surface and file-level contract artifacts.
Output: Consistency report + traceability/acceptance/index updates.
</objective>

<execution_context>
@/Users/peterryszkiewicz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/peterryszkiewicz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/specs/INDEX.md
@.planning/specs/INVENTORY.md
@.planning/specs/contracts/FILE-CONTRACT-COVERAGE.md
@.planning/specs/contracts/BACKEND-RUNTIME-MATRIX.md
@.planning/specs/surfaces/REST-API-ENDPOINT-MATRIX.md
@.planning/specs/surfaces/REST-API-CONTRACTS.md
@.planning/specs/surfaces/WEBSOCKET-ENDPOINT-MATRIX.md
@.planning/specs/surfaces/WEBSOCKET-CONTRACTS.md
@.planning/specs/surfaces/SURFACE-TRACEABILITY.md
@.planning/specs/surfaces/SURFACE-ACCEPTANCE-CHECKS.md
@.planning/specs/surfaces/DATA-PERSISTENCE-MATRIX.md
@.planning/specs/surfaces/DATA-PERSISTENCE-CONTRACTS.md
@.planning/specs/surfaces/PROCESS-LIFECYCLE-MATRIX.md
@.planning/specs/surfaces/PROCESS-LIFECYCLE-CONTRACTS.md
@.planning/specs/surfaces/SECURITY-POLICY-MATRIX.md
@.planning/specs/surfaces/SECURITY-POLICY-CONTRACTS.md
@.planning/phases/06-surface-contracts-data-process-security/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Publish cross-contract consistency ledger</name>
  <files>.planning/specs/surfaces/SURFACE-CROSS-CONTRACT-CONSISTENCY.md</files>
  <action>Create a consistency ledger that verifies lane parity totals (`D01`..`D12`, `P01`..`P12`, `S01`..`S15`), cross-links to REST/WebSocket surfaces, and references implementing `ART-####` artifacts. Include explicit blocker criteria for missing links, mismatched counts, or unresolved policy/lifecycle contradictions.</action>
  <verify>rg -n "D01|D12|P01|P12|S01|S15|REST-API-CONTRACTS|WEBSOCKET-CONTRACTS|ART-|blocker|pass/fail" .planning/specs/surfaces/SURFACE-CROSS-CONTRACT-CONSISTENCY.md</verify>
  <done>Consistency ledger exists with explicit parity totals, linkage checks, and blocker criteria.</done>
</task>

<task type="auto">
  <name>Task 2: Extend surface traceability with Phase 6 lanes</name>
  <files>.planning/specs/surfaces/SURFACE-TRACEABILITY.md</files>
  <action>Update traceability to include Data/Persistence, Process/Lifecycle, and Security/Policy families with links to new matrix/contract artifacts and required backend ART anchors (`ART-0075`, `ART-0077`, `ART-0100`, `ART-0102`, `ART-0106`, `ART-0109`, `ART-0118`, `ART-0120`, `ART-0122`, `ART-0124`, `ART-0126`, `ART-0130`, `ART-0141`..`ART-0144`).</action>
  <verify>rg -n "Data|Process|Security|DATA-PERSISTENCE|PROCESS-LIFECYCLE|SECURITY-POLICY|ART-0075|ART-0122|ART-0144" .planning/specs/surfaces/SURFACE-TRACEABILITY.md</verify>
  <done>Traceability document includes Phase 6 family-to-artifact linkage coverage.</done>
</task>

<task type="auto">
  <name>Task 3: Extend acceptance matrix for SURF-03/04/05</name>
  <files>.planning/specs/surfaces/SURFACE-ACCEPTANCE-CHECKS.md</files>
  <action>Add requirement-linked acceptance checks for SURF-03, SURF-04, and SURF-05 with objective pass/fail criteria tied to matrix counts (`12`, `12`, `15`), matrix-to-contract parity checks, and traceability evidence requirements.</action>
  <verify>rg -n "SURF-03|SURF-04|SURF-05|12/12|15/15|matrix-to-contract|traceability|pass/fail" .planning/specs/surfaces/SURFACE-ACCEPTANCE-CHECKS.md</verify>
  <done>Acceptance matrix contains objective checks for all Phase 6 requirements.</done>
</task>

<task type="auto">
  <name>Task 4: Publish Phase 6 corpus links and Phase 7 prerequisites</name>
  <files>.planning/specs/INDEX.md</files>
  <action>Update `INDEX.md` with a Phase 6 Surface Contract Corpus section linking the new lane artifacts and consistency docs. Add explicit prerequisite notes for Phase 7 TS/Bun/Solid parity mapping to consume Phase 5+6 surface corpus as canonical inputs.</action>
  <verify>rg -n "Phase 6|DATA-PERSISTENCE|PROCESS-LIFECYCLE|SECURITY-POLICY|SURFACE-CROSS-CONTRACT-CONSISTENCY|Phase 7|required prerequisites" .planning/specs/INDEX.md</verify>
  <done>Index exposes complete Phase 6 corpus and downstream prerequisite wiring.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] test -f .planning/specs/surfaces/SURFACE-CROSS-CONTRACT-CONSISTENCY.md
- [ ] rg -n "D01|P01|S01|REST-API-CONTRACTS|WEBSOCKET-CONTRACTS" .planning/specs/surfaces/SURFACE-CROSS-CONTRACT-CONSISTENCY.md
- [ ] rg -n "SURF-03|SURF-04|SURF-05|12/12|15/15" .planning/specs/surfaces/SURFACE-ACCEPTANCE-CHECKS.md
- [ ] rg -n "Phase 6|DATA-PERSISTENCE|PROCESS-LIFECYCLE|SECURITY-POLICY|Phase 7" .planning/specs/INDEX.md
- [ ] git diff --name-only | rg -v '^\.planning/' returns no output
</verification>

<success_criteria>

- All tasks completed
- Phase 6 lane artifacts are consistent and cross-linked with prior surface/file contracts
- SURF-03/04/05 acceptance criteria are explicit and objective
- Index publishes Phase 6 corpus as canonical Phase 7 prerequisite input
- No source implementation files modified

</success_criteria>

<output>
After completion, create `.planning/phases/06-surface-contracts-data-process-security/06-04-SUMMARY.md`
</output>
